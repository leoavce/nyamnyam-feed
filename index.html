<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>상폄동 맛집 이야기 · nyamnyam feed</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />
  <!-- font awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />
  <!-- app css -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="app-root">
    <!-- 헤더 -->
    <header class="app-header">
      <div class="app-title">
        <div class="app-title-main">상폄동 맛집 이야기</div>
        <div class="app-title-sub">nyamnyam feed</div>
      </div>
      <div class="header-controls">
        <input
          id="searchInput"
          type="text"
          class="control control-input"
          placeholder="가게 이름 · 해시태그(#국밥) 검색"
        />
        <button
          id="exploreFeedBtn"
          class="control control-button ghost"
          type="button"
        >
          <i class="fa fa-compass"></i>
          <span>피드 탐색하기</span>
        </button>
        <button
          id="addRestaurantBtn"
          class="control control-button primary"
          type="button"
        >
          <i class="fa fa-plus"></i>
          <span>맛집 추가하기</span>
        </button>
        <button
          id="userProfileBtn"
          class="control control-button ghost"
          type="button"
        >
          <i class="fa fa-user"></i>
          <span id="userNicknameLabel">닉네임</span>
        </button>
        <button
          id="logoutBtn"
          class="control control-button ghost"
          type="button"
        >
          로그아웃
        </button>
      </div>
    </header>

    <!-- 메인 -->
    <main class="app-main">
      <section class="restaurant-section">
        <div id="restaurantList" class="restaurant-grid">
          <!-- 카드 렌더링 -->
        </div>
        <div id="emptyState" class="empty-state hidden">
          <p>아직 등록된 맛집이 없어요.</p>
          <p>제일 먼저 <strong>“맛집 추가하기”</strong>를 눌러 상폄동 맛집을 기록해볼까요?</p>
        </div>
      </section>
    </main>
  </div>

  <!-- 맛집 생성/편집 모달 -->
  <div id="restaurantModal" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h2 id="restaurantModalTitle">맛집 추가하기</h2>
        <button class="icon-button" id="closeRestaurantModalBtn">
          <i class="fa fa-xmark"></i>
        </button>
      </div>
      <form id="restaurantForm" class="modal-body form-grid">
        <input type="hidden" id="restaurantIdField" />

        <!-- 섹션: 기본 정보 -->
        <div class="form-section-title full-width">기본 정보</div>

        <div class="form-field full-width">
          <label for="nameInput">가게 이름</label>
          <input id="nameInput" type="text" required />
        </div>

        <div class="form-field full-width">
          <label for="locationInput">주소 / 위치</label>
          <input
            id="locationInput"
            type="text"
            placeholder="예: 경기 성남시 분당구 판교역로 235 ..."
            required
          />
        </div>

        <div class="form-field full-width">
          <label for="friendlyLocationInput">친절한 위치 설명</label>
          <input
            id="friendlyLocationInput"
            type="text"
            placeholder="예: 안랩 바로 뒤 골목, 판교역 1번출구에서 5분"
          />
        </div>

        <div class="form-field">
          <label for="mainMenuInput">대표 메뉴</label>
          <input
            id="mainMenuInput"
            type="text"
            placeholder="예: 차돌짬뽕, 비빔막국수, 모둠초밥 등"
          />
        </div>

        <div class="form-field">
          <label for="vibeInput">분위기</label>
          <input
            id="vibeInput"
            type="text"
            placeholder="예: 조용한, 시끌벅적한, 회식용, 혼밥 편한"
          />
        </div>

        <div class="form-field">
          <label for="waitingInput">웨이팅 정도</label>
          <input
            id="waitingInput"
            type="text"
            placeholder="예: 점심 피크 10~20분, 거의 없음 등"
          />
        </div>

        <div class="form-field">
          <label for="smellInput">냄새 배는지</label>
          <input
            id="smellInput"
            type="text"
            placeholder="예: 많이 배는 편, 거의 안 배는 편"
          />
        </div>

        <div class="form-field">
          <label for="priceRangeInput">가격대</label>
          <input
            id="priceRangeInput"
            type="text"
            placeholder="예: 1인 1.2만~1.6만, 세트 3만대"
          />
        </div>

        <!-- 섹션: 추가 정보 -->
        <div class="form-section-title full-width">추가 정보</div>

        <div class="form-field">
          <label for="tagsInput">카테고리 태그</label>
          <input
            id="tagsInput"
            type="text"
            placeholder="예: 한식, 일식, 중식, 동남아, 양식 ..."
          />
          <p class="field-help">쉼표(,)로 구분해 여러 개 입력할 수 있어요.</p>
        </div>

        <div class="form-field full-width">
          <label for="hashtagsInput">해시태그</label>
          <input
            id="hashtagsInput"
            type="text"
            placeholder="예: #점심맛집, #회식, #혼밥"
          />
          <p class="field-help">띄어쓰기 또는 쉼표(,)로 여러 개 입력 가능 (# 없이 입력해도 자동 처리)</p>
        </div>

        <div class="form-field full-width">
          <label for="imageUrlInput">사진/블로그 URL (선택)</label>
          <input
            id="imageUrlInput"
            type="url"
            placeholder="이미지가 있는 블로그/인스타/식당 페이지 주소"
          />
          <p class="field-help">카드에 링크 미리보기로만 사용돼요. 이미지를 직접 업로드하진 않아요.</p>
        </div>

        <div class="modal-footer full-width">
          <button type="button" class="text-button" id="cancelRestaurantBtn">
            취소
          </button>
          <button type="submit" class="primary-btn">
            저장하기
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- 맛집 상세 모달 -->
  <div id="detailModal" class="modal-overlay hidden">
    <div class="modal modal-large">
      <div class="modal-header detail-header">
        <div class="detail-title-block">
          <h2 id="detailName" class="detail-name">가게 이름</h2>
          <div class="detail-sub">
            <span id="detailAvgRating" class="detail-rating">★ -</span>
            <span id="detailReviewCount" class="detail-reviews">(리뷰 0개)</span>
          </div>
        </div>
        <div class="detail-actions">
          <button
            id="editRestaurantBtn"
            class="icon-button subtle hidden"
            type="button"
          >
            <i class="fa fa-pen"></i>
            <span>편집</span>
          </button>
          <button
            id="deleteRestaurantBtn"
            class="icon-button danger hidden"
            type="button"
          >
            <i class="fa fa-trash"></i>
            <span>삭제</span>
          </button>
          <button class="icon-button" id="closeDetailModalBtn" type="button">
            <i class="fa fa-xmark"></i>
          </button>
        </div>
      </div>

      <div class="detail-tabs">
        <button
          class="detail-tab-button active"
          data-tab="info"
          type="button"
        >
          Info
        </button>
        <button class="detail-tab-button" data-tab="feed" type="button">
          Feed
        </button>
        <button class="detail-tab-button" data-tab="stats" type="button">
          Stats
        </button>
        <button class="detail-tab-button" data-tab="map" type="button">
          Map
        </button>
      </div>

      <div class="detail-body">
        <!-- Info 탭 -->
        <div
          id="tab-info"
          class="detail-tab-panel active"
          data-tab-panel="info"
        >
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-location-dot"></i>
                위치
              </div>
              <div id="detailLocation" class="info-value">-</div>
              <div id="detailFriendlyLocation" class="info-sub">-</div>
            </div>

            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-bowl-food"></i>
                대표 메뉴
              </div>
              <div id="detailMainMenu" class="info-value">-</div>
            </div>

            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-mug-hot"></i>
                분위기
              </div>
              <div id="detailVibe" class="info-value">-</div>
            </div>

            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-clock"></i>
                웨이팅
              </div>
              <div id="detailWaiting" class="info-value">-</div>
            </div>

            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-wind"></i>
                냄새 배는지
              </div>
              <div id="detailSmell" class="info-value">-</div>
            </div>

            <div class="info-item">
              <div class="info-label">
                <i class="fa fa-won-sign"></i>
                가격대
              </div>
              <div id="detailPriceRange" class="info-value">-</div>
            </div>

            <div class="info-item info-full">
              <div class="info-label">
                <i class="fa fa-tag"></i>
                태그
              </div>
              <div id="detailTags" class="chip-row"></div>
            </div>

            <div class="info-item info-full">
              <div class="info-label">
                <i class="fa fa-hashtag"></i>
                해시태그
              </div>
              <div id="detailHashtags" class="chip-row"></div>
            </div>

            <div class="info-item info-full">
              <div class="info-label">
                <i class="fa fa-link"></i>
                링크
              </div>
              <div id="detailLinkArea" class="link-preview">
                -
              </div>
            </div>
          </div>
        </div>

        <!-- Feed 탭 -->
        <div
          id="tab-feed"
          class="detail-tab-panel"
          data-tab-panel="feed"
        >
          <div class="feed-wrapper">
            <div id="feedList" class="feed-list">
              <!-- 리뷰 목록 -->
            </div>

            <div class="feed-form">
              <h3 class="feed-form-title">리뷰 남기기</h3>
              <div class="rating-selector" id="ratingSelector">
                <button data-rating="1" type="button">★</button>
                <button data-rating="2" type="button">★</button>
                <button data-rating="3" type="button">★</button>
                <button data-rating="4" type="button">★</button>
                <button data-rating="5" type="button">★</button>
              </div>
              <textarea
                id="reviewTextInput"
                rows="3"
                placeholder="실제 가봤을 때의 분위기, 추천 메뉴, 팁 등을 적어주세요."
              ></textarea>
              <div class="feed-form-footer">
                <button
                  id="cancelEditReviewBtn"
                  class="text-button hidden"
                  type="button"
                >
                  수정 취소
                </button>
                <button id="submitReviewBtn" class="primary-btn" type="button">
                  리뷰 등록
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Stats 탭 -->
        <div
          id="tab-stats"
          class="detail-tab-panel"
          data-tab-panel="stats"
        >
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">평균 별점</div>
              <div id="statsAvgRating" class="stat-value">-</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">리뷰 수</div>
              <div id="statsReviewCount" class="stat-value">0개</div>
            </div>
            <div class="stat-card stat-wide">
              <div class="stat-label">간단 코멘트</div>
              <div id="statsSummaryText" class="stat-summary">
                리뷰가 쌓이면 전체 분위기를 요약해서 보여줄게요.
              </div>
            </div>
            <div class="stat-card stat-wide">
              <div class="stat-label">가장 최근 리뷰</div>
              <div id="statsRecentReview" class="stat-recent">
                아직 등록된 리뷰가 없어요.
              </div>
            </div>
          </div>
        </div>

        <!-- Map 탭 -->
        <div
          id="tab-map"
          class="detail-tab-panel"
          data-tab-panel="map"
        >
          <div class="map-wrapper">
            <div class="map-frame">
              <iframe
                id="mapFrame"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              ></iframe>
            </div>
            <p class="map-hint">
              식당 이름 기준으로 네이버 지도를 열어볼 수 있어요.
            </p>
            <button id="openMapExternalBtn" class="secondary-btn" type="button">
              <i class="fa fa-location-arrow"></i>
              네이버 지도에서 열기
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- nyamnyam feed 모달 -->
  <div id="feedModal" class="modal-overlay hidden">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>nyamnyam feed</h2>
        <button class="icon-button" id="closeFeedModalBtn" type="button">
          <i class="fa fa-xmark"></i>
        </button>
      </div>
      <div class="feed-tabs">
        <button
          class="feed-tab-button active"
          data-feed-tab="mine"
          type="button"
        >
          내 기록
        </button>
        <button
          class="feed-tab-button"
          data-feed-tab="all"
          type="button"
        >
          전체 피드
        </button>
      </div>
      <div class="detail-body">
        <!-- 내 기록 -->
        <div id="feedTab-mine" class="feed-tab-panel active" data-feed-panel="mine">
          <section class="feed-section">
            <div class="feed-section-header">
              <h3>내가 추가한 맛집</h3>
            </div>
            <div id="myRestaurantsList" class="feed-log-list">
              <!-- 렌더링 -->
            </div>
          </section>

          <section class="feed-section">
            <div class="feed-section-header">
              <h3>최근에 다녀간 식당</h3>
            </div>
            <div id="recentVisitsList" class="feed-log-list">
              <!-- 렌더링 -->
            </div>
          </section>

          <section class="feed-section">
            <div class="feed-section-header">
              <h3>나의 nyamnyam 글</h3>
            </div>

            <div class="post-form">
              <input
                id="postTitleInput"
                type="text"
                placeholder="제목 (예: 안랩 뒤 짬뽕집 후기)"
              />
              <textarea
                id="postContentInput"
                rows="3"
                placeholder="오늘의 식당 기록, 메뉴, 분위기, 꿀팁 등을 자유롭게 남겨보세요."
              ></textarea>
              <div class="post-form-footer">
                <button id="postSubmitBtn" class="primary-btn" type="button">
                  글 올리기
                </button>
              </div>
            </div>

            <div id="myPostsList" class="feed-post-list">
              <!-- 내 글 -->
            </div>
          </section>
        </div>

        <!-- 전체 피드 -->
        <div id="feedTab-all" class="feed-tab-panel" data-feed-panel="all">
          <section class="feed-section">
            <div class="feed-section-header">
              <h3>전체 nyamnyam feed</h3>
              <p class="feed-section-sub">
                모두가 남긴 식당 이야기들을 타임라인 형식으로 볼 수 있어요.
              </p>
            </div>
            <div id="allPostsList" class="feed-post-list">
              <!-- 전체 글 -->
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- 토스트 -->
  <div id="toast" class="toast hidden"></div>

  <!-- 메인 JS -->
  <script type="module" src="app.js"></script>
</body>
</html>
